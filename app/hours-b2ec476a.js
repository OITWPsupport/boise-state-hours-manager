!function(){"use strict";angular.module("hoursApp",[]).constant("PLUGIN_ROOT","/wp-content/plugins/bsu_hours/").filter("dayOfWeek",function(){return function(t){return t?moment().isSame(t.start,"day")?"Today":t.dayOfWeek:void 0}}).filter("openHours",function(){return function(t){return t&&moment.isMoment(t.start)&&!t.closed?t.start.format("h:mma")+" -":void 0}}).filter("closeHours",function(){return function(t){return t&&moment.isMoment(t.end)?t.closed?"Closed":t.end.format("h:mma"):void 0}})}(),function(){"use strict";angular.module("hoursApp").controller("MainCtrl",["$scope","$timeout","locationService","apiService",function(t,e,n,i){function o(){e(function(){void 0===gapi||void 0===gapi.client||void 0===gapi.client.setApiKey?o():(i.init(r.settings.apiKey),t.locations=n.formatLocations(r.locations))},5)}var r;t.locations=[],t.init=function(e){r=angular.fromJson(e),t.settings=r.settings,void 0!==r.title&&(t.title=r.title),o()}}])}(),function(){"use strict";angular.module("hoursApp").directive("allPage",["PLUGIN_ROOT",function(t){return{restrict:"E",templateUrl:t+"templates/app/allHours.html"}}])}(),function(){"use strict";angular.module("hoursApp").directive("frontPage",["PLUGIN_ROOT",function(t){return{restrict:"E",templateUrl:t+"templates/app/frontPage.html"}}])}(),function(){"use strict";angular.module("hoursApp").directive("loading",function(){return{restrict:"E",template:['<div ng-show="loading" class="bsuSpinner">','<div class="bounce1"></div>','<div class="bounce2"></div>','<div class="bounce3"></div>',"</div>"].join(""),scope:{loading:"="}}})}(),function(){"use strict";angular.module("hoursApp").directive("locationPage",["PLUGIN_ROOT",function(t){return{restrict:"E",templateUrl:t+"templates/app/individualHours.html",link:function(t){t.loading=!0,t.$watch("locations",function(e){e&&(t.location=e.shift())})}}}])}(),function(){"use strict";angular.module("hoursApp").directive("todayHours",["apiService","hoursService","PLUGIN_ROOT",function(t,e,n){return{restrict:"E",scope:{location:"="},templateUrl:n+"templates/app/todayHours.html",link:function(n){n.loading=!0,n.$watch("location",function(i){if(i){var o=moment().startOf("day"),r=moment().startOf("day").add(1,"day");t.getHoursForLocation(i.calendarId,o,r).then(function(t){n.hours=e.formatAllForDisplay(i,t,o,r).shift(),n.loading=!1,n.$apply()})}})}}}])}(),function(){"use strict";angular.module("hoursApp").directive("weekHours",["apiService","hoursService","PLUGIN_ROOT",function(t,e,n){return{restrict:"E",scope:{location:"="},templateUrl:n+"templates/app/weekHours.html",link:function(n){n.loading=!0,n.$watch("location",function(i){if(void 0!==i){var o=moment().startOf("day"),r=moment().startOf("day").add(1,"week");t.getHoursForLocation(i.calendarId,o,r).then(function(t){n.location.hours=e.formatAllForDisplay(i,t,o,r),n.loading=!1,n.$apply()})}})}}}])}(),function(){"use strict";angular.module("hoursApp").service("apiService",["$rootScope","$q","dateService",function(t,e,n){this.init=function(t){gapi.client.setApiKey(t)},this.getHoursForLocation=function(t,i,o){var r="v3",a="MM/DD/YYYY h:mma";return gapi.client.load("calendar",r).then(function(){return gapi.client.calendar.events.list({calendarId:t,singleEvents:!0,timeMin:n.getDateTimeString(i.format(a)),timeMax:n.getDateTimeString(o.format(a))})}).then(function(t){var n=e.defer();return n.resolve(t.result.items),n.promise})}}])}(),function(){"use strict";angular.module("hoursApp").service("dateService",function(){function t(t){return 10>t?"0"+t:t}this.getDateString=function(t,e,n){void 0===e&&(e="YYYY-MM-DD");var i=moment(t,["MM/DD/YYYY"]).format(e);return void 0!==n&&(i+="Z"),i},this.getDateTimeString=function(e,n){var i=moment().isDST()?"-06:00":"-07:00";return moment(t(e)+t(n),["MM/DD/YYYY h:mma"]).format("YYYY-MM-DDTHH:mm:ss"+i)},this.getStartMoment=function(t){var e;return void 0!==t.start.date||(e=t.start.dateTime),moment(e,["YYYY-MM-DDTHH:mm:ssZ"])},this.getEndMoment=function(t){var e;return e=void 0!==t.end.date?t.end.date:t.end.dateTime,moment(e,["YYYY-MM-DDTHH:mm:ssZ"])}})}(),function(){"use strict";angular.module("hoursApp").service("hoursService",["dateService",function(t){function e(t){return{dayOfWeek:t.format("ddd"),start:t.clone(),end:t.clone(),closed:!0}}function n(n,o){var r=e(o);return angular.forEach(n,function(e){var n=t.getStartMoment(e);n.isSame(o,"day")&&(r=i(e))}),r}function i(e){var n=t.getStartMoment(e),i=t.getEndMoment(e);return{dayOfWeek:n.format("ddd"),start:n,end:i,closed:n.isSame(i)}}this.formatAllForDisplay=function(t,e,i,o){for(var r=o.diff(i,"days"),a=i.clone(),s=[];r>0;){var u=n(e,a);s.push(u),a.add(1,"days"),--r}return s}}])}(),function(){"use strict";angular.module("hoursApp").service("locationService",function(){var t=this;this.formatLocations=function(e){var n=[];return angular.forEach(e,function(e){n.push(t.formatLocation(e))}),n},this.formatLocation=function(t){return{name:t.post_title,calendarId:t.details.calendarId,address:t.details.address,phone:t.details.phone,fax:t.details.fax,imgPath:t.details.imgPath,fullSchedule:t.details.fullSchedule,showMap:"on"==t.details.showMap,showReservations:"on"==t.details.showReservations,priority:t.details.priority,hours:[]}}})}();
//# sourceMappingURL=../app/maps/hours-b2ec476a.js.map